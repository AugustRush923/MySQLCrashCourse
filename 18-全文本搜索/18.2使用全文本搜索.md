# 使用全文本搜索

为了进行全文本搜索，必须索引被搜索的列，而且要随着数据的改变不断地重新索引。在对表列进行适当设计后，MySQL会自动进行所有的索引和重新索引。

在索引之后，`SELECT`可与`Match()`和`Against()`一起使用以实际执行搜索。

## 启用全文本搜索支持

一般在创建表时启用全文本搜索。`CREATE TABLE`语句接受`FULLTEXT`子句，它给出被索引列的一个逗号分隔的列表。

```sql
create table productnotes
(
    note_id   int not null auto_increment,
    prod_id   char(10) not null,
    note_date datetime not null,
    note_text text     null,
    primary key(note_id),
    fulltext(note_text)
)
    engine = MyISAM;
```

MySQL根据子句`FULLTEXT(note_text)`的指示对它进行索引。这里的`FULLTEXT`索引单个列，如果需要也可以指定多个列。

在定义之后，MySQL自动维护该索引。在增加、更新或删除行时，索引随之自动更新。

可以在创建表时指定`FULLTEXT`，或者在稍后指定（在这种情况下所有已有数据必须立即索引）。

```sql
create fulltext index note_text
    on productnotes (note_text);
```

> **不要在导入数据时使用`FULLTEXT`**
> 更新索引要花时间。如果正在导入数据到一个新表，此时不应该启用`FULLTEXT`索引。应该首先导入所有数据，然后再修改表，定义`FULLTEXT`。

## 进行全文本搜索

在索引之后，使用两个函数`Match()`和`Against()`执行全文本搜索，其中`Match()`指定被搜索的列，`Against()`指定要使用的搜索表达式。

```sql
select note_text
from productnotes
where match(note_text) against('rabbit');
```

此`SELECT`语句检索单个列`note_text`。`Match(note_text)`指示MySQL针对指定的列进行行搜索，`Against('rabbit')`指定词`rabbit`作为搜索文本。

> **使用完整的Match()说明**
> 传递给Match()的值必须与FULLTEXT()定义中的相同。如果指定多个列，则必须列出它们（而且次序正确）。

> **搜索不区分大小写**
> 除非使用`BINARY`方式，否则全文本搜索不区分大小写。

> **排序多个搜索列**
> 如果指定多个搜索项，则包含多数匹配词的那些行将具有比包含较少词（或仅有一个匹配）的那些行高的等级值。

## 使用查询扩展
